<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì UX/UI –ö—É—Ä—Å - –¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: #ffffff;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 2rem;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .sidebar-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
        }

        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .sidebar-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .stats-card {
            margin: 1rem;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
            text-align: center;
        }

        .stats-number {
            font-size: 2rem;
            font-weight: 700;
        }

        .stats-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .nav-menu {
            padding: 1rem 0;
        }

        .nav-item {
            padding: 0.75rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .nav-item:hover {
            background: rgba(102, 126, 234, 0.1);
            border-left-color: #667eea;
        }

        .nav-item.active {
            background: rgba(102, 126, 234, 0.15);
            border-left-color: #667eea;
            color: #667eea;
        }

        .nav-icon {
            margin-right: 0.75rem;
            font-size: 1.2rem;
        }

        .nav-text {
            font-weight: 500;
        }

        .nav-badge {
            background: #ff4757;
            color: white;
            border-radius: 10px;
            padding: 0.2rem 0.5rem;
            font-size: 0.7rem;
            margin-left: auto;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem;
        }

        .header {
            background: white;
            padding: 1.5rem 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: #666;
            font-size: 1rem;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .metric-info h3 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .metric-info p {
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-icon {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .metric-change {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .change-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .change-badge.positive {
            background: #d4edda;
            color: #155724;
        }

        .change-badge.negative {
            background: #f8d7da;
            color: #721c24;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 0.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .tab {
            flex: 1;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        /* Content Area */
        .content-area {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-height: 400px;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        /* Recent Activity */
        .activity-list {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 1rem;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .activity-time {
            color: #666;
            font-size: 0.9rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        /* Chart placeholder */
        .chart-placeholder {
            height: 300px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.1rem;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.7);
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #eee;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: #333;
        }

        .student-detail-item {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            border-bottom: 1px solid #eee;
        }

        .student-detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #333;
        }

        .detail-value {
            color: #666;
            text-align: right;
            max-width: 60%;
            word-break: break-word;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-avatar">üéì</div>
                <div class="sidebar-title">UX/UI –ö—É—Ä—Å</div>
                <div class="sidebar-subtitle">–¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
            </div>

            <div class="stats-card">
                <div class="stats-number" id="sidebarStudentCount">-</div>
                <div class="stats-label">–°—Ç—É–¥–µ–Ω—Ç–æ–≤</div>
            </div>

            <nav class="nav-menu">
                <div class="nav-item active" onclick="switchTab('overview')">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">–û–±–∑–æ—Ä</span>
                </div>
                <div class="nav-item" onclick="switchTab('course')">
                    <span class="nav-icon">üéì</span>
                    <span class="nav-text">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–º</span>
                </div>
                <div class="nav-item" onclick="switchTab('students')">
                    <span class="nav-icon">üë•</span>
                    <span class="nav-text">–°—Ç—É–¥–µ–Ω—Ç—ã</span>
                    <span class="nav-badge">3</span>
                </div>
                <div class="nav-item" onclick="switchTab('marketing')">
                    <span class="nav-icon">üì¢</span>
                    <span class="nav-text">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</span>
                </div>
                <div class="nav-item" onclick="switchTab('website')">
                    <span class="nav-icon">üåê</span>
                    <span class="nav-text">–†–µ–¥–∞–∫—Ç–æ—Ä —Å–∞–π—Ç–∞</span>
                </div>
                <div class="nav-item" onclick="switchTab('analytics')">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-text">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
                </div>
                <div class="nav-item" onclick="switchTab('automation')">
                    <span class="nav-icon">ü§ñ</span>
                    <span class="nav-text">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</span>
                </div>
                <div class="nav-item" onclick="switchTab('interviews')">
                    <span class="nav-icon">üìù</span>
                    <span class="nav-text">–ò–Ω—Ç–µ—Ä–≤—å—é</span>
                </div>
                <div class="nav-item" onclick="switchTab('settings')">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1>üéì UX/UI –ö—É—Ä—Å - –¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
                <p>–ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–º, —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–º –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
            </div>

            <!-- Overview Section -->
            <div class="content-section active" id="overview">
                <div class="cards-grid">
                    <div class="metric-card fade-in">
                        <div class="metric-header">
                            <div class="metric-info">
                                <h3 style="color: #667eea;" id="totalStudents">-</h3>
                                <p>–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
                            </div>
                            <div class="metric-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">üë•</div>
                        </div>
                        <div class="metric-change">
                            <span class="change-badge positive" id="studentsGrowth">-</span>
                            <span style="color: #666; font-size: 0.9rem;">vs –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü</span>
                        </div>
                    </div>

                    <div class="metric-card fade-in">
                        <div class="metric-header">
                            <div class="metric-info">
                                <h3 style="color: #4CAF50;" id="totalRevenue">‚Ç¨-</h3>
                                <p>–û–±—â–∏–π –¥–æ—Ö–æ–¥</p>
                            </div>
                            <div class="metric-icon" style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);">üí∞</div>
                        </div>
                        <div class="metric-change">
                            <span class="change-badge positive" id="revenueGrowth">-</span>
                            <span style="color: #666; font-size: 0.9rem;">vs –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü</span>
                        </div>
                    </div>

                    <div class="metric-card fade-in">
                        <div class="metric-header">
                            <div class="metric-info">
                                <h3 style="color: #FF9800;">15.2%</h3>
                                <p>–ö–æ–Ω–≤–µ—Ä—Å–∏—è</p>
                            </div>
                            <div class="metric-icon" style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);">üìà</div>
                        </div>
                        <div class="metric-change">
                            <span class="change-badge positive">+3.2%</span>
                            <span style="color: #666; font-size: 0.9rem;">vs –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü</span>
                        </div>
                    </div>

                    <div class="metric-card fade-in">
                        <div class="metric-header">
                            <div class="metric-info">
                                <h3 style="color: #2196F3;">1,250</h3>
                                <p>–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏</p>
                            </div>
                            <div class="metric-icon" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);">üëÄ</div>
                        </div>
                        <div class="metric-change">
                            <span class="change-badge positive">+12%</span>
                            <span style="color: #666; font-size: 0.9rem;">vs –ø—Ä–æ—à–ª–∞—è –Ω–µ–¥–µ–ª—è</span>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <button class="action-btn" onclick="switchTab('course')">
                        üéì –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å
                    </button>
                    <button class="action-btn" onclick="switchTab('students')">
                        üë• –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø–∏—Å–∏
                    </button>
                    <button class="action-btn" onclick="switchTab('marketing')">
                        üì¢ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
                    </button>
                    <button class="action-btn" onclick="switchTab('website')">
                        üåê –û–±–Ω–æ–≤–∏—Ç—å —Å–∞–π—Ç
                    </button>
                </div>

                <div class="content-area">
                    <h2>üìä –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h2>
                    <ul class="activity-list" id="recentActivity">
                        <li class="activity-item">
                            <div class="activity-icon">üìä</div>
                            <div class="activity-content">
                                <div class="activity-title">–ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å...</div>
                                <div class="activity-time">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Course Management Section -->
            <div class="content-section" id="course">
                <div class="content-area">
                    <h2>üéì –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–º</h2>
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞</label>
                        <input type="text" class="form-input" value="UX/UI –î–∏–∑–∞–π–Ω - –ü–æ–ª–Ω—ã–π –∫—É—Ä—Å" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea class="form-input form-textarea" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞">–ò–∑—É—á–∏—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UX/UI –¥–∏–∑–∞–π–Ω —Å –Ω—É–ª—è –¥–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã, —Ä–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã, —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.</textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–¶–µ–Ω–∞ –∫—É—Ä—Å–∞ (‚Ç¨)</label>
                        <input type="number" class="form-input" value="199" placeholder="199">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–Ω–µ–¥–µ–ª—å)</label>
                        <input type="number" class="form-input" value="12" placeholder="12">
                    </div>
                    <button class="action-btn" style="margin-top: 1rem;">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </div>
            </div>

            <!-- Students Section -->
            <div class="content-section" id="students">
                <div class="content-area">
                    <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏</h2>
                    <div class="cards-grid" style="margin-bottom: 2rem;">
                        <div class="metric-card">
                            <h3 id="studentsTotal">-</h3>
                            <p>–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
                        </div>
                        <div class="metric-card">
                            <h3 id="studentsActive">-</h3>
                            <p>–ù–æ–≤—ã—Ö –ª–∏–¥–æ–≤</p>
                        </div>
                        <div class="metric-card">
                            <h3 id="studentsContacted">-</h3>
                            <p>–°–≤—è–∑–∞–ª–∏—Å—å</p>
                        </div>
                        <div class="metric-card">
                            <h3 id="studentsEnrolled">-</h3>
                            <p>–ó–∞—á–∏—Å–ª–µ–Ω–æ</p>
                        </div>
                    </div>
                    
                    <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h3>
                    <div id="studentsTableContainer">
                        <ul class="activity-list" id="studentsList">
                            <li class="activity-item">
                                <div class="activity-icon">üìä</div>
                                <div class="activity-content">
                                    <div class="activity-title">–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...</div>
                                    <div class="activity-time">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <button class="action-btn" onclick="exportStudents()" style="margin-top: 1rem;">
                        üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
                    </button>
                </div>
            </div>

            <!-- Marketing Section -->
            <div class="content-section" id="marketing">
                <div class="content-area">
                    <h2>üì¢ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏</h2>
                    <div class="cards-grid" style="margin-bottom: 2rem;">
                        <div class="metric-card">
                            <h3>5</h3>
                            <p>–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π</p>
                        </div>
                        <div class="metric-card">
                            <h3>‚Ç¨820</h3>
                            <p>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ –≤ –º–µ—Å—è—Ü</p>
                        </div>
                        <div class="metric-card">
                            <h3>15.2%</h3>
                            <p>CTR</p>
                        </div>
                        <div class="metric-card">
                            <h3>‚Ç¨41</h3>
                            <p>–¶–µ–Ω–∞ –ª–∏–¥–∞</p>
                        </div>
                    </div>
                    
                    <button class="action-btn" style="margin-bottom: 2rem;">
                        ‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é
                    </button>
                    
                    <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏</h3>
                    <ul class="activity-list">
                        <li class="activity-item">
                            <div class="activity-icon">üì±</div>
                            <div class="activity-content">
                                <div class="activity-title">Instagram Stories</div>
                                <div class="activity-time">–ë—é–¥–∂–µ—Ç: ‚Ç¨200/–¥–µ–Ω—å ‚Ä¢ CTR: 18.5% üü¢</div>
                            </div>
                        </li>
                        <li class="activity-item">
                            <div class="activity-icon">üë•</div>
                            <div class="activity-content">
                                <div class="activity-title">Facebook Ads</div>
                                <div class="activity-time">–ë—é–¥–∂–µ—Ç: ‚Ç¨150/–¥–µ–Ω—å ‚Ä¢ CTR: 12.3% üü°</div>
                            </div>
                        </li>
                        <li class="activity-item">
                            <div class="activity-icon">üîç</div>
                            <div class="activity-content">
                                <div class="activity-title">Google Ads</div>
                                <div class="activity-time">–ë—é–¥–∂–µ—Ç: ‚Ç¨300/–¥–µ–Ω—å ‚Ä¢ CTR: 8.9% üî¥</div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Website Editor Section -->
            <div class="content-section" id="website">
                <div class="content-area">
                    <h2>üåê –†–µ–¥–∞–∫—Ç–æ—Ä —Å–∞–π—Ç–∞</h2>
                    <div class="form-group">
                        <label class="form-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</label>
                        <input type="text" class="form-input" value="–°—Ç–∞–Ω—å—Ç–µ UX/UI –¥–∏–∑–∞–π–Ω–µ—Ä–æ–º –∑–∞ 12 –Ω–µ–¥–µ–ª—å" placeholder="–û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <textarea class="form-input" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞">–ò–∑—É—á–∏—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UX/UI –¥–∏–∑–∞–π–Ω —Å –Ω—É–ª—è. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã, —Ä–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.</textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–¶–µ–Ω–∞ –Ω–∞ —Å–∞–π—Ç–µ</label>
                        <input type="text" class="form-input" value="‚Ç¨199" placeholder="‚Ç¨199">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏</label>
                        <input type="text" class="form-input" value="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫—É—Ä—Å" placeholder="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è —Å–µ–π—á–∞—Å">
                    </div>
                    <button class="action-btn" style="margin-top: 1rem;">
                        üöÄ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </div>
            </div>

            <!-- Analytics Section -->
            <div class="content-section" id="analytics">
                <div class="content-area">
                    <h2>üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                    <div class="cards-grid" style="margin-bottom: 2rem;">
                        <div class="metric-card">
                            <h3>1,250</h3>
                            <p>–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –∑–∞ –Ω–µ–¥–µ–ª—é</p>
                        </div>
                        <div class="metric-card">
                            <h3>89</h3>
                            <p>–õ–∏–¥—ã</p>
                        </div>
                        <div class="metric-card">
                            <h3>23</h3>
                            <p>–ö–æ–Ω–≤–µ—Ä—Å–∏–∏</p>
                        </div>
                        <div class="metric-card">
                            <h3>25.8%</h3>
                            <p>–ö–æ–Ω–≤–µ—Ä—Å–∏—è –ª–∏–¥ ‚Üí –∫–ª–∏–µ–Ω—Ç</p>
                        </div>
                    </div>
                    
                    <div class="chart-placeholder">
                        üìä –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
                    </div>
                </div>
            </div>

            <!-- Automation Section -->
            <div class="content-section" id="automation">
                <div class="content-area">
                    <h2>ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h2>
                    <div class="cards-grid" style="margin-bottom: 2rem;">
                        <div class="metric-card">
                            <h3>47</h3>
                            <p>–ü–æ—Å—Ç–æ–≤ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</p>
                        </div>
                        <div class="metric-card">
                            <h3>3</h3>
                            <p>–ê–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–∞</p>
                        </div>
                        <div class="metric-card">
                            <h3>12</h3>
                            <p>Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</p>
                        </div>
                        <div class="metric-card">
                            <h3>98.5%</h3>
                            <p>–ê–ø—Ç–∞–π–º</p>
                        </div>
                    </div>
                    
                    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞</h3>
                    <div class="form-group">
                        <label class="form-label">Bot Token</label>
                        <input type="password" class="form-input" placeholder="–¢–æ–∫–µ–Ω –æ—Ç @BotFather">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Chat ID</label>
                        <input type="text" class="form-input" placeholder="–í–∞—à Chat ID">
                    </div>
                    <button class="action-btn" style="margin-top: 1rem;">
                        üîß –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                </div>
            </div>

            <!-- Interviews Section -->
            <div class="content-section" id="interviews">
                <div class="content-area">
                    <h2>üìù –ò–Ω—Ç–µ—Ä–≤—å—é –∏ –æ—Ç–∑—ã–≤—ã</h2>
                    <div class="cards-grid" style="margin-bottom: 2rem;">
                        <div class="metric-card">
                            <h3>12</h3>
                            <p>–ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∏–Ω—Ç–µ—Ä–≤—å—é</p>
                        </div>
                        <div class="metric-card">
                            <h3>4.8</h3>
                            <p>–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</p>
                        </div>
                        <div class="metric-card">
                            <h3>8</h3>
                            <p>–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤</p>
                        </div>
                        <div class="metric-card">
                            <h3>100%</h3>
                            <p>–†–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –∫—É—Ä—Å</p>
                        </div>
                    </div>
                    
                    <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã</h3>
                    <ul class="activity-list">
                        <li class="activity-item">
                            <div class="activity-icon">‚≠ê</div>
                            <div class="activity-content">
                                <div class="activity-title">–ê–Ω–Ω–∞ –ö. - 5/5 –∑–≤–µ–∑–¥</div>
                                <div class="activity-time">"–û—Ç–ª–∏—á–Ω—ã–π –∫—É—Ä—Å! –ü–æ–ª—É—á–∏–ª–∞ —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è"</div>
                            </div>
                        </li>
                        <li class="activity-item">
                            <div class="activity-icon">‚≠ê</div>
                            <div class="activity-content">
                                <div class="activity-title">–°–µ—Ä–≥–µ–π –ú. - 5/5 –∑–≤–µ–∑–¥</div>
                                <div class="activity-time">"–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –æ–±—ä—è—Å–Ω—è–µ—Ç –æ—á–µ–Ω—å –ø–æ–Ω—è—Ç–Ω–æ, –º–Ω–æ–≥–æ –ø—Ä–∞–∫—Ç–∏–∫–∏"</div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="content-section" id="settings">
                <div class="content-area">
                    <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                    <div class="form-group">
                        <label class="form-label">Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</label>
                        <input type="email" class="form-input" value="admin@uxui-course.com" placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</label>
                        <select class="form-input">
                            <option>Europe/Moscow (UTC+3)</option>
                            <option>Europe/London (UTC+0)</option>
                            <option>Europe/Berlin (UTC+1)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–í–∞–ª—é—Ç–∞</label>
                        <select class="form-input">
                            <option>EUR (‚Ç¨)</option>
                            <option>USD ($)</option>
                            <option>RUB (‚ÇΩ)</option>
                        </select>
                    </div>
                    <button class="action-btn" style="margin-top: 1rem;">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Detail Modal -->
    <div class="modal" id="studentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìã –î–µ—Ç–∞–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞</h3>
                <button class="modal-close" onclick="closeStudentModal()">&times;</button>
            </div>
            <div id="studentDetails">
                <!-- Student details will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // üî• Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD8pbUwiBvT-H4sVkDya6kVQZl8b1eve08",
            authDomain: "uxui-course-landing.firebaseapp.com",
            projectId: "uxui-course-landing",
            storageBucket: "uxui-course-landing.firebasestorage.app",
            messagingSenderId: "333543552813",
            appId: "1:333543552813:web:d859729de86722d6eb05a4",
            measurementId: "G-FLEVDJY8YQ"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();

        // Global variables for analytics
        let studentsData = [];
        let analyticsCache = {
            totalStudents: 0,
            totalRevenue: 0,
            recentActivity: []
        };

        // Navigation functionality
        function switchTab(tabName) {
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to clicked nav item
            event.target.closest('.nav-item').classList.add('active');
            
            // Hide all content sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected content section
            document.getElementById(tabName).classList.add('active');
            
            // Load data when switching to students tab
            if (tabName === 'students') {
                loadStudentsData();
            }
        }

        // üéì Load and display students data
        async function loadStudentsData() {
            try {
                console.log('üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤...');
                
                const studentsSnapshot = await db.collection('students')
                    .orderBy('timestamp', 'desc')
                    .get();
                
                studentsData = [];
                studentsSnapshot.forEach(doc => {
                    const data = doc.data();
                    studentsData.push({
                        id: doc.id,
                        ...data,
                        timestamp: data.timestamp ? data.timestamp.toDate() : new Date()
                    });
                });
                
                console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${studentsData.length} —Å—Ç—É–¥–µ–Ω—Ç–æ–≤`);
                
                // Update UI
                displayStudents();
                updateAnalytics();
                updateRecentActivity();
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:', error);
                displayError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤');
            }
        }

        // üìä Display students in the list
        function displayStudents() {
            const studentsList = document.getElementById('studentsList');
            
            if (studentsData.length === 0) {
                studentsList.innerHTML = `
                    <li class="activity-item">
                        <div class="activity-icon">üì≠</div>
                        <div class="activity-content">
                            <div class="activity-title">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π</div>
                            <div class="activity-time">–ó–∞–ø–∏—Å–∏ –Ω–∞ –∫—É—Ä—Å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å</div>
                        </div>
                    </li>
                `;
                return;
            }
            
            studentsList.innerHTML = studentsData.map(student => {
                const date = formatDate(student.timestamp);
                const statusIcon = getStatusIcon(student.status);
                const price = student.price ? `‚Ç¨${student.price}` : '‚Ç¨2008.19';
                
                return `
                    <li class="activity-item" style="border-left: 4px solid ${getStatusColor(student.status)}; cursor: pointer;" 
                        onclick="showStudentDetails('${student.id}')">
                        <div class="activity-icon" style="background: ${getStatusColor(student.status)};">üë§</div>
                        <div class="activity-content">
                            <div class="activity-title">${student.name || '–ë–µ–∑ –∏–º–µ–Ω–∏'}</div>
                            <div class="activity-time">
                                üìß ${student.email || 'email –Ω–µ —É–∫–∞–∑–∞–Ω'} ‚Ä¢ 
                                üìû ${student.phone || '—Ç–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω'}<br>
                                üìö ${student.course || '–∫—É—Ä—Å –Ω–µ –≤—ã–±—Ä–∞–Ω'} ‚Ä¢ 
                                üí∞ ${price} ‚Ä¢ 
                                ${statusIcon} ${getStatusText(student.status)}<br>
                                üïí ${date} ‚Ä¢ üåê ${student.source || 'unknown'}
                            </div>
                        </div>
                        <div style="margin-left: auto; display: flex; gap: 0.5rem;" onclick="event.stopPropagation();">
                            <button onclick="updateStudentStatus('${student.id}', 'contacted')" 
                                    style="padding: 0.3rem 0.8rem; background: #4CAF50; color: white; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer;">
                                ‚úÖ –°–≤—è–∑–∞–ª–∏—Å—å
                            </button>
                            <button onclick="updateStudentStatus('${student.id}', 'enrolled')" 
                                    style="padding: 0.3rem 0.8rem; background: #2196F3; color: white; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer;">
                                üéì –ó–∞—á–∏—Å–ª–µ–Ω
                            </button>
                            <button onclick="showStudentDetails('${student.id}')" 
                                    style="padding: 0.3rem 0.8rem; background: #667eea; color: white; border: none; border-radius: 4px; font-size: 0.7rem; cursor: pointer;">
                                üëÅÔ∏è –î–µ—Ç–∞–ª–∏
                            </button>
                        </div>
                    </li>
                `;
            }).join('');
        }

        // üìà Update analytics metrics
        function updateAnalytics() {
            const totalStudents = studentsData.length;
            const totalRevenue = studentsData.reduce((sum, student) => {
                return sum + (student.price || 2008.19);
            }, 0);
            
            // Count students by status
            const statusCounts = studentsData.reduce((counts, student) => {
                const status = student.status || 'new_lead';
                counts[status] = (counts[status] || 0) + 1;
                return counts;
            }, {});
            
            // Update main counters
            document.getElementById('sidebarStudentCount').textContent = totalStudents;
            document.getElementById('totalStudents').textContent = totalStudents;
            document.getElementById('totalRevenue').textContent = `‚Ç¨${totalRevenue.toLocaleString()}`;
            
            // Update students page counters
            const studentsTotal = document.getElementById('studentsTotal');
            const studentsActive = document.getElementById('studentsActive');
            const studentsContacted = document.getElementById('studentsContacted');
            const studentsEnrolled = document.getElementById('studentsEnrolled');
            
            if (studentsTotal) studentsTotal.textContent = totalStudents;
            if (studentsActive) studentsActive.textContent = statusCounts.new_lead || 0;
            if (studentsContacted) studentsContacted.textContent = statusCounts.contacted || 0;
            if (studentsEnrolled) studentsEnrolled.textContent = statusCounts.enrolled || 0;
            
            // Calculate growth (mock data for now)
            const growth = Math.floor(Math.random() * 30) + 10;
            document.getElementById('studentsGrowth').textContent = `+${growth}%`;
            document.getElementById('revenueGrowth').textContent = `+${Math.floor(growth * 1.2)}%`;
            
            // Update cache
            analyticsCache.totalStudents = totalStudents;
            analyticsCache.totalRevenue = totalRevenue;
            analyticsCache.statusCounts = statusCounts;
            
            console.log('üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:', {
                totalStudents,
                totalRevenue,
                statusCounts
            });
        }

        // üïí Update recent activity
        function updateRecentActivity() {
            const recentActivity = document.getElementById('recentActivity');
            const recentStudents = studentsData.slice(0, 5);
            
            if (recentStudents.length === 0) {
                recentActivity.innerHTML = `
                    <li class="activity-item">
                        <div class="activity-icon">üì≠</div>
                        <div class="activity-content">
                            <div class="activity-title">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
                            <div class="activity-time">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π</div>
                        </div>
                    </li>
                `;
                return;
            }
            
            recentActivity.innerHTML = recentStudents.map(student => {
                const timeAgo = getTimeAgo(student.timestamp);
                return `
                    <li class="activity-item">
                        <div class="activity-icon">üë§</div>
                        <div class="activity-content">
                            <div class="activity-title">–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å</div>
                            <div class="activity-time">${student.name} –∑–∞–ø–∏—Å–∞–ª—Å—è ${timeAgo}</div>
                        </div>
                    </li>
                `;
            }).join('');
        }

        // üîÑ Update student status
        async function updateStudentStatus(studentId, newStatus) {
            try {
                await db.collection('students').doc(studentId).update({
                    status: newStatus,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                console.log(`‚úÖ –°—Ç–∞—Ç—É—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ ${studentId} –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ ${newStatus}`);
                
                // Reload data
                await loadStudentsData();
                
                // Show notification
                showNotification(`–°—Ç–∞—Ç—É—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω!`, 'success');
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞', 'error');
            }
        }

        // üì• Export students to CSV
        function exportStudents() {
            if (studentsData.length === 0) {
                showNotification('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error');
                return;
            }
            
            const headers = ['–ò–º—è', 'Email', '–¢–µ–ª–µ—Ñ–æ–Ω', '–ö—É—Ä—Å', '–¶–µ–Ω–∞', '–°—Ç–∞—Ç—É—Å', '–î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏', '–ò—Å—Ç–æ—á–Ω–∏–∫'];
            const csvContent = [
                headers.join(','),
                ...studentsData.map(student => [
                    `"${student.name || ''}"`,
                    `"${student.email || ''}"`,
                    `"${student.phone || ''}"`,
                    `"${student.course || ''}"`,
                    student.price || 2008.19,
                    `"${getStatusText(student.status)}"`,
                    `"${formatDate(student.timestamp)}"`,
                    `"${student.source || 'unknown'}"`
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `students_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification(`–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${studentsData.length} –∑–∞–ø–∏—Å–µ–π`, 'success');
        }

        // Mobile sidebar toggle
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        // üé® Helper functions for student status
        function getStatusColor(status) {
            switch(status) {
                case 'new_lead': return '#FF9800';
                case 'contacted': return '#4CAF50';
                case 'enrolled': return '#2196F3';
                case 'completed': return '#9C27B0';
                default: return '#666';
            }
        }

        function getStatusIcon(status) {
            switch(status) {
                case 'new_lead': return 'üÜï';
                case 'contacted': return '‚òéÔ∏è';
                case 'enrolled': return 'üéì';
                case 'completed': return '‚úÖ';
                default: return '‚ùì';
            }
        }

        function getStatusText(status) {
            switch(status) {
                case 'new_lead': return '–ù–æ–≤—ã–π –ª–∏–¥';
                case 'contacted': return '–°–≤—è–∑–∞–ª–∏—Å—å';
                case 'enrolled': return '–ó–∞—á–∏—Å–ª–µ–Ω';
                case 'completed': return '–ó–∞–≤–µ—Ä—à–∏–ª –∫—É—Ä—Å';
                default: return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            }
        }

        // üìÖ Format date helpers
        function formatDate(date) {
            if (!date) return '–î–∞—Ç–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞';
            return new Intl.DateTimeFormat('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            }).format(date);
        }

        function getTimeAgo(date) {
            if (!date) return '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ –∫–æ–≥–¥–∞';
            
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / (1000 * 60));
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            
            if (diffMins < 60) return `${diffMins} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (diffHours < 24) return `${diffHours} —á –Ω–∞–∑–∞–¥`;
            return `${diffDays} –¥–Ω –Ω–∞–∑–∞–¥`;
        }

        // üö® Error handling
        function displayError(message) {
            const studentsList = document.getElementById('studentsList');
            studentsList.innerHTML = `
                <li class="activity-item">
                    <div class="activity-icon" style="background: #f44336;">‚ùå</div>
                    <div class="activity-content">
                        <div class="activity-title">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>
                        <div class="activity-time">${message}</div>
                    </div>
                </li>
            `;
        }

        // üì¢ Notification system
        function showNotification(message, type = 'success') {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notif => notif.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            // Add notification styles if not exists
            if (!document.getElementById('notificationStyles')) {
                const style = document.createElement('style');
                style.id = 'notificationStyles';
                style.textContent = `
                    .notification {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        padding: 1rem 1.5rem;
                        border-radius: 8px;
                        font-weight: 600;
                        z-index: 10000;
                        opacity: 0;
                        transform: translateX(100%);
                        transition: all 0.3s ease;
                        max-width: 300px;
                    }
                    
                    .notification.success {
                        background: #4CAF50;
                        color: white;
                    }
                    
                    .notification.error {
                        background: #f44336;
                        color: white;
                    }
                    
                    .notification.show {
                        opacity: 1;
                        transform: translateX(0);
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // üëÅÔ∏è Show student details modal
        function showStudentDetails(studentId) {
            const student = studentsData.find(s => s.id === studentId);
            if (!student) {
                showNotification('–°—Ç—É–¥–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                return;
            }
            
            const modal = document.getElementById('studentModal');
            const detailsContainer = document.getElementById('studentDetails');
            
            detailsContainer.innerHTML = `
                <div class="student-detail-item">
                    <span class="detail-label">üë§ –ò–º—è:</span>
                    <span class="detail-value">${student.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üìß Email:</span>
                    <span class="detail-value">${student.email || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üìû –¢–µ–ª–µ—Ñ–æ–Ω:</span>
                    <span class="detail-value">${student.phone || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üìö –ö—É—Ä—Å:</span>
                    <span class="detail-value">${student.course || '–ù–µ –≤—ã–±—Ä–∞–Ω'}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üí∞ –¶–µ–Ω–∞:</span>
                    <span class="detail-value">‚Ç¨${student.price || '2008.19'}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">${getStatusIcon(student.status)} –°—Ç–∞—Ç—É—Å:</span>
                    <span class="detail-value" style="color: ${getStatusColor(student.status)}; font-weight: 600;">
                        ${getStatusText(student.status)}
                    </span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üïí –î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏:</span>
                    <span class="detail-value">${formatDate(student.timestamp)}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üåê –ò—Å—Ç–æ—á–Ω–∏–∫:</span>
                    <span class="detail-value">${student.source || 'unknown'}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üîß User Agent:</span>
                    <span class="detail-value" style="font-size: 0.8rem;">${student.userAgent || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</span>
                </div>
                <div class="student-detail-item">
                    <span class="detail-label">üìù ID –≤ –±–∞–∑–µ:</span>
                    <span class="detail-value" style="font-family: monospace; font-size: 0.8rem;">${student.id}</span>
                </div>
                
                <div style="margin-top: 2rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button onclick="updateStudentStatus('${student.id}', 'contacted'); closeStudentModal();" 
                            style="flex: 1; padding: 0.8rem; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        ‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ —Å–≤—è–∑–∞–ª–∏—Å—å
                    </button>
                    <button onclick="updateStudentStatus('${student.id}', 'enrolled'); closeStudentModal();" 
                            style="flex: 1; padding: 0.8rem; background: #2196F3; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        üéì –ó–∞—á–∏—Å–ª–∏—Ç—å –Ω–∞ –∫—É—Ä—Å
                    </button>
                </div>
                
                <div style="margin-top: 1rem;">
                    <button onclick="copyToClipboard('${student.email}', 'Email —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!')" 
                            style="width: 100%; padding: 0.8rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å email
                    </button>
                </div>
            `;
            
            modal.classList.add('show');
        }

        // ‚ùå Close student details modal
        function closeStudentModal() {
            const modal = document.getElementById('studentModal');
            modal.classList.remove('show');
        }

        // üìã Copy to clipboard function
        function copyToClipboard(text, message) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification(message, 'success');
            }).catch(() => {
                showNotification('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
            });
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('studentModal');
            if (event.target === modal) {
                closeStudentModal();
            }
        });

        // Simulate real-time updates
        function updateStats() {
            // This function now handled by Firebase real-time data
            loadStudentsData();
        }

        // üöÄ Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéì –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è dashboard...');
            
            // Load students data immediately
            loadStudentsData();
            
            // Set up real-time listener for new students
            db.collection('students')
                .orderBy('timestamp', 'desc')
                .onSnapshot((snapshot) => {
                    console.log('üîÑ –ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤');
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === 'added') {
                            console.log('‚ú® –ù–æ–≤—ã–π —Å—Ç—É–¥–µ–Ω—Ç:', change.doc.data());
                            // Reload data to update all counters
                            setTimeout(() => loadStudentsData(), 1000);
                        }
                    });
                }, (error) => {
                    console.error('‚ùå –û—à–∏–±–∫–∞ real-time listener:', error);
                });
            
            // Add click animations to cards
            document.querySelectorAll('.metric-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            // Add fade-in animations
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            });

            document.querySelectorAll('.metric-card').forEach(card => {
                observer.observe(card);
            });

            // Update stats every 30 seconds
            setInterval(updateStats, 30000);
            
            console.log('‚úÖ Dashboard –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        });

        // Add mobile menu button
        if (window.innerWidth <= 768) {
            const header = document.querySelector('.header');
            const menuBtn = document.createElement('button');
            menuBtn.innerHTML = '‚ò∞';
            menuBtn.style.cssText = `
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 1001;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 8px;
                padding: 0.5rem;
                font-size: 1.2rem;
                cursor: pointer;
            `;
            menuBtn.onclick = toggleSidebar;
            document.body.appendChild(menuBtn);
        }
    </script>
</body>
</html> 